<!DOCTYPE html>

<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title> D-Designer | Dashboard </title>
    <link rel="stylesheet" href="style.css">
 
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <style>
         
     </style>
   </head>
<body>
  <div class="sidebar">
    <div class="logo-details">
        <i class='bx bx-user-circle' title="D-Designer"></i>
      <span class="logo_name">D-Designer</span>
    </div>
      <ul class="nav-links">
        <li>
          <a href="admin.html" class="active">
            <i class='bx bx-grid-alt' ></i>
            <span class="links_name">Dashboard</span>
          </a>
        </li>
        
        <li>
          <a href="new-post.html">
            <i class=' bx bx-add-to-queue' ></i>
            <span class="links_name">New Post</span>
          </a>
        </li>
        <li>
          <a href="message.html">
            <i class='bx bx-message-detail' ></i>
            <span class="links_name">Messages</span>
          </a>
        </li>
        
        <li class="log_out">
          <a href="#" id="logoutBtn"><i class='bx bx-log-out' title="logout" style="cursor: pointer;" onclick="logout()"></i><span class="links_name">Log out</span>
          </a>
        </li>
      </ul>
  </div>
  <section class="home-section">
    <nav>
      <div class="sidebar-button">
        <i class='bx bx-menu sidebarBtn'></i>
        <span class="dashboard"></span>
      </div>
      <div class="">
        <h2>Posted Articles</h2>
      </div>
      <div class="profile-details">
        <img src="assets/img/e.jpg" alt="">
        <span class="admin_name">Daniel T</span>
        
        <a href="#" id="logoutBtn"><i class='bx bx-log-out' title="logout" style="cursor: pointer;" onclick="logout()"></i></a>
      </div>
    </nav>

    <div class="home-content">
      
      <div class="sales-boxes">
        <!-- <div class="title"><h3>Recent Posts</h3></div> -->
        <div class="recent-sales box" id="viewpost">
          
        </div>
        <div class="top-sales box">
          <div class="title"><h3>Tags</h3></div>
          <ul class="top-sales-details">
            <li>
            <a href="#">
              
              <span class="product">- Html5 & Css3</span>
            </a>
          </li>
          <li>
            <a href="#">
              <span class="product">- C++ & PHP</span>
            </a>
          
          </li>
          <li>
            <a href="#">
              <span class="product">- Web Design</span>
            </a>
          </li>
          <li>
            <a href="#">
              <span class="product">- Photoshoot</span>
            </a>
          </li><li>
            <a href="#">
              <span class="product">- Business Creation</span>
            </a>
          </li><li>
            <a href="#">
              <span class="product">- Full Stack Developer</span>
            </a>
          </li>
          
          </ul>
        </div>
      </div>
    </div>
  </section> 
  <script src="./javascript.js"></script>
  <script>
   let sidebar = document.querySelector(".sidebar");
 let sidebarBtn = document.querySelector(".sidebarBtn");
sidebarBtn.onclick = function() {
  sidebar.classList.toggle("active");
  if(sidebar.classList.contains("active")){
  sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
}else
  sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
}
 </script>
<script>
  
  var article = document.getElementById('viewpost');
  var datatodisplay = ""
  var myHeaders = new Headers();
myHeaders.append("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyNmZkMjM0NTJkNTNjMzZlNmNlMzYxNyIsImlhdCI6MTY1MjE1OTY2MiwiZXhwIjoxNjU0NzUxNjYyfQ.iJuMr7Oe0gJtc3PVMbiwOl4yd0peL4M3Kr8tNSYy8m8");

var requestOptions = {
method: 'GET',
headers: myHeaders,
redirect: 'follow'
};

fetch("https://my-brand-app-v1.herokuapp.com/api/articles/", requestOptions)
.then(response => response.json())
.then(result => {console.log(result)
result.forEach(element => {
  datatodisplay += `
  <div class="sales-details">
            <ul class="details">
              <li class="topic"><h4>Date</h4></li>
              <li><a href="#">${element.postedDate}</a></li>
            
            </ul> <ul class="details">
            <li class="topic"><h4>Title</h4></li>
            <li><a href="#">${element.title}</a></li>
           
            </ul>
            <ul class="details">
              <li class="topic"><h4>Image</h4></li>
              <li> <a href="#"><img src="${element.imageUrl}" alt="" class="img-fluid" style="width:2cm; height:2cm"></a></li>
            </ul>
        
          </div>
          <div class="feedback-footer"><a href="viewposted.html"><button class="delete">View</button></a>
               <a href='mailto:${element.email}' target='blank'> <button class="reply">Update</button></a>
                <button class="delete" onclick="deleteMessage('${element._id}')">Delete</button>
              
          
            
          </div>`
});
article.innerHTML =datatodisplay

})

.catch(error => console.log('error', error));

    const deleteArticle = id => {
      var myHeaders = new Headers();
myHeaders.append("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyNmZkMjM0NTJkNTNjMzZlNmNlMzYxNyIsImlhdCI6MTY1MjE1OTY2MiwiZXhwIjoxNjU0NzUxNjYyfQ.iJuMr7Oe0gJtc3PVMbiwOl4yd0peL4M3Kr8tNSYy8m8");

var requestOptions = {
  method: 'DELETE',
  headers: myHeaders,
  redirect: 'follow'
};

fetch("https://my-brand-app-v1.herokuapp.com/api/articles/delete/627bda9718acf4c71d40fa4b", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));
    }

    const update = (id, title, content) => {
      const article = {
        id, title, content
      }
      localStorage.setItem("updateArticle", JSON.stringify(article));
      // // location.href = './'
      // console.log(article)
      // console.log(JSON.parse(localStorage.getItem("updateArticle")));
    }
    localStorage.removeItem('updateArticle')


    const readMore = article => {
      localStorage.setItem('articleToRead', article);
    }
</script>
</body></html>

