<!DOCTYPE html>

<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title> D-Designer | Dashboard </title>
    <link rel="stylesheet" href="style.css">
 
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
<body>
  <div class="sidebar">
    <div class="logo-details">
        <i class='bx bx-user-circle' title="D-Designer"></i>
      <span class="logo_name">D-Designer</span>
    </div>
      <ul class="nav-links">
        <li>
          <a href="admin.html" class="active">
            <i class='bx bx-grid-alt' ></i>
            <span class="links_name">Dashboard</span>
          </a>
        </li>

        <li>
          <a href="new-post.html">
            <i class=' bx bx-add-to-queue' ></i>
            <span class="links_name">New Post</span>
          </a>
        </li>
        <li>
          <a href="view-post.html">
            <i class='bx bx-show-alt' ></i>
            <span class="links_name">View post</span>
          </a>
        </li>
        <li class="log_out">
          <a href="#" id="logoutBtn"><i class='bx bx-log-out' title="logout" style="cursor: pointer;" onclick="logout()"></i><span class="links_name">Log out</span>
          </a>
        </li>
      </ul>
  </div>
  <section class="home-section">
    <nav>
      <div class="sidebar-button">
        <i class='bx bx-menu sidebarBtn'></i>
        <span class="dashboard"></span>
      </div>
      <div class="">
        <h2>A Post</h2>
      </div>
      <div class="profile-details">
        <img src="assets/img/e.jpg" alt="">
        <span class="admin_name">Daniel T</span>
     
        <a href="#" id="logoutBtn"><i class='bx bx-log-out' title="logout" style="cursor: pointer;" onclick="logout()"></i></a>
      </div>
    </nav>
    <div class="home-content">
      
      <div class="sales-boxes">
        <div class="recent-sales box">
          <div class="title"><h2>View a post</h2></div><br>
          <form action="">
            <div class="box-comments" id="viewonepost">
              <!-- <div class="title-box-2">
                <h4 class="title-comments title-left">Recent Messages</h4><br>
              </div> -->
             
                
            </div>
        </form>
        </div>
        <div class="top-sales box">
          <div class="title"><h3>Tags</h3></div>
          <ul class="top-sales-details">
            <li>
            <a href="#">
              
              <span class="product">- Html5 & Css3</span>
            </a>
          </li>
          <li>
            <a href="#">
              <span class="product">- C++ & PHP</span>
            </a>
          
          </li>
          <li>
            <a href="#">
              <span class="product">- Web Design</span>
            </a>
          </li>
          <li>
            <a href="#">
              <span class="product">- Photoshoot</span>
            </a>
          </li><li>
            <a href="#">
              <span class="product">- Business Creation</span>
            </a>
          </li><li>
            <a href="#">
              <span class="product">- Full Stack Developer</span>
            </a>
          </li>
          
          </ul>
        </div>
      </div>
    </div>
  </section>

  <script>
   let sidebar = document.querySelector(".sidebar");
let sidebarBtn = document.querySelector(".sidebarBtn");
sidebarBtn.onclick = function() {
  sidebar.classList.toggle("active");
  if(sidebar.classList.contains("active")){
  sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
}else
  sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
}
 </script>
<script>
  var article = document.getElementById('viewonepost');
  var datatodisplay = ""
  var myHeaders = new Headers();
myHeaders.append("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyNmZkMjM0NTJkNTNjMzZlNmNlMzYxNyIsImlhdCI6MTY1MjE1OTY2MiwiZXhwIjoxNjU0NzUxNjYyfQ.iJuMr7Oe0gJtc3PVMbiwOl4yd0peL4M3Kr8tNSYy8m8");

var requestOptions = {
method: 'GET',
headers: myHeaders,
redirect: 'follow'
};

fetch(`https://my-brand-app-v1.herokuapp.com/api/articles/${id}`, requestOptions)
.then(response => response.json())
.then(result => {console.log(result)
result.forEach(element => {
  datatodisplay += `
  <div class="sales-details">
            <ul class="details">
              <li class="topic"><h4>Date</h4></li>
              <li><a href="#">${element.postedDate}</a></li>
            
            </ul> <ul class="details">
            <li class="topic"><h4>Title</h4></li>
            <li><a href="#">${element.title}</a></li>
           
            </ul>
            <ul class="details">
              <li class="topic"><h4>Image</h4></li>
              <li> <a href="#"><img src="${element.imageUrl}" alt="" class="img-fluid" style="width:2cm; height:2cm"></a></li>
            </ul>
        
          </div>
          <div class="button">
            <a href="view-post.html">View Post</a>
          </div>`
});
article.innerHTML =datatodisplay

})

.catch(error => console.log('error', error));
</script>
<script>
  const user = JSON.parse(localStorage.getItem('loginedUser'))
  let articles;
  const getArticleOnDashbaord = () => {
    var requestOptions = {
  method: 'GET',
  redirect: 'follow'
};

fetch("https://my-brand-app-v1.herokuapp.com/api/articles/6279fdec1967ea195ddf231e", requestOptions)
  .then(response => response.text())
  .then(result => console.log(result))
  .catch(error => console.log('error', error));

  }
  getArticleOnDashbaord()

  const deleteArticle = id => {
    var myHeaders = new Headers();
    myHeaders.append("Authorization", `Bearer ${user.token}`);

    var requestOptions = {
      method: 'DELETE',
      headers: myHeaders,
      redirect: 'follow'
    };

    fetch(`https://my-brand-app-api.herokuapp.com/api/articles/delete/${id}`, requestOptions)
      .then(response => response.json())
      .then(result => {
        console.log(result)
        getArticleOnDashbaord()
      })
      .catch(error => console.log('error', error));

  }

  const update = (id, title, content) => {
    const article = {
      id, title, content
    }
    localStorage.setItem("updateArticle", JSON.stringify(article));
    // // location.href = './'
    // console.log(article)
    // console.log(JSON.parse(localStorage.getItem("updateArticle")));
  }
  localStorage.removeItem('updateArticle')


  const readMore = article => {
    localStorage.setItem('articleToRead', article);
  }
</script>
</body>
</html>
